<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>utils/api/editor-framework/core/editor-window.js</title>
  <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
  <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
  <link rel="shortcut icon" type="image/ico" href="../assets/favicon.ico">
  <link rel="stylesheet" href="../assets/css/solarized_light.css">
  <script src="../assets/vendor/yui-min.js"></script>
</head>
<body>

<div id="doc">
  <header class="main-header">
    <div class="content">
      <div class="project-title">
        <a href="http://docs.fireball-x.com">
          <img class="logo" src="http://docs.fireball-x.com/images/logo.png" title="fireball">
        </a>
          <h1 class="project-name">fireball</h1>
          <span class="project-version">0.5.0</span>
          <p class="description">Fireball is the Html5 game engine for the future.</p>
        </div>
        <ul class="jump-links">
          <li><a href="#index" class="index-jump-link">index</a></li>
          <li><a href="#top" class="top-jump-link">top</a></li>
        </ul>
    </div>
  </header>
  <div id="bd" class="main-body">
    <div id="docs-sidebar" class="sidebar apidocs"><div id="api-list" style="height:100%">
  <div id="api-tabview" class="tabview" style="height:100%">
    <div id="api-tabview-filter">
      <input type="search" id="api-filter" placeholder="Type to filter APIs">
    </div>
    <div id="api-tabview-panel">
      <ul id="api-items" class="apis items">
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.html">Editor</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
                <h3>properties</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_selfExcluded">
                        selfExcluded
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_requireIpcEvent">
                        requireIpcEvent
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isNode">
                        isNode
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isElectron">
                        isElectron
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isNative">
                        isNative
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isPureWeb">
                        isPureWeb
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isPageLevel">
                        isPageLevel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isCoreLevel">
                        isCoreLevel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isDarwin">
                        isDarwin
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isWin32">
                        isWin32
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isRetina">
                        isRetina
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_App">
                        App
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_cwd">
                        cwd
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_name">
                        name
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_versions">
                        versions
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_mainEntry">
                        mainEntry
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_frameworkPath">
                        frameworkPath
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_appHome">
                        appHome
                      </a>
                    </li>
                </ul>
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_log">
                        log
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_success">
                        success
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_failed">
                        failed
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_info">
                        info
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_warn">
                        warn
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_error">
                        error
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_fatal">
                        fatal
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_connectToConsole">
                        connectToConsole
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_clearLog">
                        clearLog
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_loadProfile">
                        loadProfile
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_quit">
                        quit
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_loadAllPackages">
                        loadAllPackages
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_watchPackages">
                        watchPackages
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_registerProfilePath">
                        registerProfilePath
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_registerPackagePath">
                        registerPackagePath
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_registerDefaultLayout">
                        registerDefaultLayout
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_">
                        
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToWindowsExclude">
                        sendToWindowsExclude
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToWindows">
                        sendToWindows
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToCore">
                        sendToCore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToAll">
                        sendToAll
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToPanel">
                        sendToPanel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToMainWindow">
                        sendToMainWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_url">
                        url
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_require">
                        require
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_registerProtocol">
                        registerProtocol
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_require">
                        require
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_log">
                        log
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToCoreSync">
                        sendToCoreSync
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToCore">
                        sendToCore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToWindows">
                        sendToWindows
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToMainWindow">
                        sendToMainWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToAll">
                        sendToAll
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToPanel">
                        sendToPanel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendRequestToCore">
                        sendRequestToCore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_cancelRequestToCore">
                        cancelRequestToCore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_KeyCode">
                        KeyCode
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Debugger.html">Editor.Debugger</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Debugger.html#method_toggle">
                        toggle
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Debugger.html#method_open">
                        open
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Debugger.html#method_close">
                        close
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.JS.html">Editor.JS</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_copyprop">
                        copyprop
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_addon">
                        addon
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_extract">
                        extract
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_mixin">
                        mixin
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_extend">
                        extend
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_clear">
                        clear
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.MainMenu.html">Editor.MainMenu</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_apply">
                        apply
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_reset">
                        reset
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_add">
                        add
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_remove">
                        remove
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_set">
                        set
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Package.html">Editor.Package</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_load">
                        load
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_unload">
                        unload
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_reload">
                        reload
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_panelInfo">
                        panelInfo
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_widgetInfo">
                        widgetInfo
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_packageInfo">
                        packageInfo
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_packagePath">
                        packagePath
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_build">
                        build
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Panel.html">Editor.Panel</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_open">
                        open
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_close">
                        close
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_findWindow">
                        findWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_findWindows">
                        findWindows
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_findPanels">
                        findPanels
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_closeAll">
                        closeAll
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Selection.html">Editor.Selection</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_confirm">
                        confirm
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_cancel">
                        cancel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_select">
                        select
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_unselect">
                        unselect
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_hover">
                        hover
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_setContext">
                        setContext
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_clear">
                        clear
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_hovering">
                        hovering
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_contexts">
                        contexts
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_curActivate">
                        curActivate
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_curSelection">
                        curSelection
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_filter">
                        filter
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Utils.html">Editor.Utils</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Utils.html#method_padLeft">
                        padLeft
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Utils.html#method_formatFrame">
                        formatFrame
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Utils.html#method_smoothScale">
                        smoothScale
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Utils.html#method_wrapError">
                        wrapError
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Math.html">Math</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
                <h3>properties</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Math.html#property_TWO_PI">
                        TWO_PI
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#property_HALF_PI">
                        HALF_PI
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#property_D">
                        D
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#property_R">
                        R
                      </a>
                    </li>
                </ul>
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_deg2rad">
                        deg2rad
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_rad2deg">
                        rad2deg
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_rad180">
                        rad180
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_rad360">
                        rad360
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_deg180">
                        deg180
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_deg360">
                        deg360
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_randomRange">
                        randomRange
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_randomRangeInt">
                        randomRangeInt
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_clamp">
                        clamp
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_clamp01">
                        clamp01
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_calculateMaxRect">
                        calculateMaxRect
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_lerp">
                        lerp
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
              <a class="class"
                href="/api/classes/IpcListener.html"
                title="Editor.IpcListener">Editor.IpcListener</a>
              <i class="flag">class</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/classes/IpcListener.html#method_on">
                        on
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/IpcListener.html#method_once">
                        once
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/IpcListener.html#method_clear">
                        clear
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
              <a class="class"
                href="/api/classes/Menu.html"
                title="Editor.Menu">Editor.Menu</a>
              <i class="flag">class</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_dispose">
                        dispose
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_reset">
                        reset
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_clear">
                        clear
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_add">
                        add
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_remove">
                        remove
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_set">
                        set
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_parseTemplate">
                        parseTemplate
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
              <a class="class"
                href="/api/classes/Window.html"
                title="Editor.Window">Editor.Window</a>
              <i class="flag">class</i>
          </div>
          <div class="members-list hidden">
            
            
                <h3>properties</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_isMainWindo">
                        isMainWindo
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_isFocuse">
                        isFocuse
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_isMinimize">
                        isMinimize
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_isLoade">
                        isLoade
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_window">
                        window
                      </a>
                    </li>
                </ul>
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_load">
                        load
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_show">
                        show
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_close">
                        close
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_focus">
                        focus
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_minimize">
                        minimize
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_restore">
                        restore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_openDevTools">
                        openDevTools
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_adjust">
                        adjust
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_commitWindowState">
                        commitWindowState
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_restorePositionAndSize">
                        restorePositionAndSize
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_find">
                        find
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_addWindow">
                        addWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_removeWindow">
                        removeWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_commitWindowStates">
                        commitWindowStates
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_saveWindowStates">
                        saveWindowStates
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_sendToPage">
                        sendToPage
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_sendRequestToPage">
                        sendRequestToPage
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_cancelRequestToPage">
                        cancelRequestToPage
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
</div>
    <div id="docs-main" class="apidocs">
      <div class="content container"><h1 class="file-heading">File: utils/api/editor-framework/core/editor-window.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var EventEmitter = require(&#x27;events&#x27;);
var BrowserWindow = require(&#x27;browser-window&#x27;);
var Screen = require(&#x27;screen&#x27;);
var Url = require(&#x27;fire-url&#x27;);
var Ipc = require(&#x27;ipc&#x27;);
var Fs = require(&#x27;fire-fs&#x27;);
/**
 * @module Editor
 */

/**
 * Window class for operating editor window
 * @class Window
 * @extends EventEmitter
 * @constructor
 * @param {string} name - The window name
 * @param {object} options - The options use [BrowserWindow&#x27;s options](https://github.com/atom/electron/blob/master/docs/api/browser-window.md#new-browserwindowoptions)
 * with the following additional field:
 * @param {string} options.&#x27;window-type&#x27; - Can be one of the list:
 *  - &#x60;dockable&#x60;: Indicate the window contains a dockable panel
 *  - &#x60;float&#x60;: Indicate the window is standalone, and float on top.
 *  - &#x60;fixed-size&#x60;: Indicate the window is standalone, float on top and non-resizable.
 *  - &#x60;quick&#x60;: Indicate the window will never destroyed, it only hides itself when it close which make it quick to show the next time.
 */
function EditorWindow ( name, options ) {
    this._loaded = false;
    this._nextSessionId = 0;
    this._replyCallbacks = {};

    // init options
    this.name = name;
    this.hideWhenBlur = false; // control by options[&#x27;hide-when-blur&#x27;] or winType === &#x27;quick&#x27;;
    this.windowType = options[&#x27;window-type&#x27;];

    switch ( this.windowType ) {
    case &#x27;dockable&#x27;:
        options.resizable = true;
        options[&#x27;always-on-top&#x27;] = false;
        break;

    case &#x27;float&#x27;:
        options.resizable = true;
        options[&#x27;always-on-top&#x27;] = true;
        break;

    case &#x27;fixed-size&#x27;:
        options.resizable = false;
        options[&#x27;always-on-top&#x27;] = true;
        break;

    case &#x27;quick&#x27;:
        options.resizable = true;
        options[&#x27;always-on-top&#x27;] = true;
        this.hideWhenBlur = true;
        break;
    }

    this.nativeWin = new BrowserWindow(options);

    if ( this.hideWhenBlur ) {
        this.nativeWin.setAlwaysOnTop(true);
    }

    // BrowserWindow events

    this.nativeWin.on ( &#x27;focus&#x27;, function ( event ) {
        if ( !Editor.focused ) {
            Editor.focused = true;
            // Editor.emit(&#x27;focus&#x27;); // TODO:
        }
    }.bind(this) );

    this.nativeWin.on ( &#x27;blur&#x27;, function () {
        // BUG: this is an atom-shell bug,
        //      it can not get focused window at the same frame
        // https://github.com/atom/atom-shell/issues/984
        setImmediate( function () {
            if ( !BrowserWindow.getFocusedWindow() ) {
                Editor.focused = false;
                // Editor.emit(&#x27;blur&#x27;); // TODO:
            }
        }.bind(this));

        if ( this.hideWhenBlur ) {
            // this.nativeWin.close();
            this.nativeWin.hide();
        }
    }.bind(this) );

    this.nativeWin.on ( &#x27;close&#x27;, function ( event ) {
        // quick window never close, it just hide
        if ( this.windowType === &#x27;quick&#x27; ) {
            event.preventDefault();
            this.nativeWin.hide();
        }

        // NOTE: I can not put these in &#x27;closed&#x27; event. In Windows, the getBounds will return
        //       zero width and height in &#x27;closed&#x27; event
        Editor.Panel._onWindowClose(this);
        EditorWindow.commitWindowStates();
        EditorWindow.saveWindowStates();
    }.bind(this) );

    this.nativeWin.on ( &#x27;closed&#x27;, function () {
        Editor.Panel._onWindowClosed(this);

        // if we still have sendRequestToPage callbacks,
        // just call them directly to prevent request endless waiting
        for ( var sessionId in this._replyCallbacks ) {
            var cb = this._replyCallbacks[sessionId];
            if (cb) cb();
            delete this._replyCallbacks[sessionId];
        }

        if ( this.isMainWindow ) {
            EditorWindow.removeWindow(this);
            Editor.mainWindow = null;
            Editor.quit();
        }
        else {
            EditorWindow.removeWindow(this);
        }
    }.bind(this) );

    // WebContents events
    // order: dom-ready -&gt; did-frame-finish-load -&gt; did-finish-load

    // this.nativeWin.webContents.on(&#x27;dom-ready&#x27;, function ( event ) {
    //     Editor.log(&#x27;dom-ready&#x27;);
    // });

    // this.nativeWin.webContents.on(&#x27;did-frame-finish-load&#x27;, function() {
    //     Editor.log(&#x27;did-frame-finish-load&#x27;);
    // }.bind(this) );

    this.nativeWin.webContents.on(&#x27;did-finish-load&#x27;, function() {
        this._loaded = true;

        // TODO: do we really need this?
        // Editor.sendToCore(&#x27;window:reloaded&#x27;, this);
    }.bind(this) );

    EditorWindow.addWindow(this); // NOTE: window must be add after nativeWin assigned
}
Editor.JS.extend(EditorWindow,EventEmitter);

/**
 * If this is a main window
 * @property {Boolean} isMainWindow
 */
Object.defineProperty(EditorWindow.prototype, &#x27;isMainWindow&#x27;, {
    get: function () {
        return Editor.mainWindow === this;
    }
});

/**
 * If the window is focused
 * @property {Boolean} isFocused
 */
Object.defineProperty(EditorWindow.prototype, &#x27;isFocused&#x27;, {
    get: function () {
        return this.nativeWin.isFocused();
    }
});

/**
 * If the window is minimized
 * @property {Boolean} isMinimized
 */
Object.defineProperty(EditorWindow.prototype, &#x27;isMinimized&#x27;, {
    get: function () {
        return this.nativeWin.isMinimized();
    }
});

/**
 * If the window is loaded
 * @property {Boolean} isLoaded
 */
Object.defineProperty(EditorWindow.prototype, &#x27;isLoaded&#x27;, {
    get: function () {
        return this._loaded;
    }
});

/**
 * Dereference the native window.
 */
EditorWindow.prototype.dispose = function () {
    // NOTE: Important to dereference the window object to allow for GC
    this.nativeWin = null;
};

/**
 * load page by url, and send argv in query property of the url. The page level will parse
 * the argv when the page is ready and save it in Editor.argv in page level
 * @method load
 * @param {string} url
 * @param {object} argv
 */
EditorWindow.prototype.load = function ( editorUrl, argv ) {
    var resultUrl = Editor.url(editorUrl);
    if ( !resultUrl ) {
        Editor.error( &#x27;Failed to load page %s for window &quot;%s&quot;&#x27;, editorUrl, this.name );
        return;
    }

    this._loaded = false;
    var url = Url.format( {
        protocol: &#x27;file&#x27;,
        pathname: resultUrl,
        slashes: true,
        hash: argv ? encodeURIComponent(JSON.stringify(argv)) : undefined
    } );
    this.nativeWin.loadUrl(url);
};

/**
 * Show the window
 * @method show
 */
EditorWindow.prototype.show = function () {
    this.nativeWin.show();
};

/**
 * Close the window
 * @method close
 */
EditorWindow.prototype.close = function () {
    this._loaded = false;
    this.nativeWin.close();
};

/**
 * Focus on the window
 * @method focus
 */
EditorWindow.prototype.focus = function () {
    this.nativeWin.focus();
};

/**
 * Minimize the window
 * @method minimize
 */
EditorWindow.prototype.minimize = function () {
    this.nativeWin.minimize();
};

/**
 * Restore the window
 * @method restore
 */
EditorWindow.prototype.restore = function () {
    this.nativeWin.restore();
};

/**
 * Open the dev-tools
 * @method openDevTools
 * @param {object} options
 * @param {Boolean} options.detach - If open the dev-tools in a new window
 */
EditorWindow.prototype.openDevTools = function (options) {
    this.nativeWin.openDevTools(options);
};

/**
 * Try to adjust the window to fit the position and size we give
 * @method adjust
 * @param {number} x
 * @param {number} y
 * @param {number} w
 * @param {number} h
 */
EditorWindow.prototype.adjust = function ( x, y, w, h ) {
    var adjustToCenter = false;
    if ( typeof x !== &#x27;number&#x27; ) {
        adjustToCenter = true;
        x = 0;
    }
    if ( typeof y !== &#x27;number&#x27; ) {
        adjustToCenter = true;
        y = 0;
    }
    if ( typeof w !== &#x27;number&#x27; || w &lt;= 0 ) {
        adjustToCenter = true;
        w = 800;
    }
    if ( typeof h !== &#x27;number&#x27; || h &lt;= 0 ) {
        adjustToCenter = true;
        h = 600;
    }

    var display = Screen.getDisplayMatching( { x: x, y: y, width: w, height: h } );
    this.nativeWin.setSize(w,h);
    this.nativeWin.setPosition( display.workArea.x, display.workArea.y );

    if ( adjustToCenter ) {
        this.nativeWin.center();
    }
    else {
        this.nativeWin.setPosition( x, y );
    }
};

/**
 * Commit the current window state
 * @method commitWindowState
 * @param {object} layoutInfo
 */
EditorWindow.prototype.commitWindowState = function ( layoutInfo ) {
    var nativeWin = this.nativeWin;
    var winBounds = nativeWin.getBounds();
    if ( !winBounds.width ) {
        Editor.warn(&#x27;Failed to commit window state. Invalid window width: %s&#x27;, winBounds.width);
        winBounds.width = 800;
    }
    if ( !winBounds.height ) {
        Editor.warn(&#x27;Failed to commit window state. Invalid window height %s&#x27;, winBounds.height);
        winBounds.height = 600;
    }

    // store windows layout
    var winInfo = _windowLayouts[this.name];
    winInfo = Editor.JS.mixin( winInfo || {}, winBounds);
    if ( layoutInfo ) {
        winInfo.layout = layoutInfo;
    }

    _windowLayouts[this.name] = winInfo;
};

/**
 * Restore window&#x27;s position and size from the &#x60;local&#x60; profile &#x60;layout.windows.json&#x60;
 * @method restorePositionAndSize
 */
EditorWindow.prototype.restorePositionAndSize = function () {
    // restore window size and position
    var size = this.nativeWin.getSize();
    var winPosX, winPosY, winSizeX = size[0], winSizeY = size[1];

    var profile = Editor.loadProfile(&#x27;layout.windows&#x27;, &#x27;local&#x27;);
    if ( profile.windows &amp;&amp; profile.windows[this.name] ) {
        var winInfo = profile.windows[this.name];
        winPosX = winInfo.x;
        winPosY = winInfo.y;
        winSizeX = winInfo.width;
        winSizeY = winInfo.height;
    }
    this.adjust( winPosX, winPosY, winSizeX, winSizeY );
};

// static window operation
var _windows = [];
var _windowLayouts = {};

/**
 * Return the window list of all opened windows
 * @property {Editor.Window[]} windows
 */
Object.defineProperty(EditorWindow, &#x27;windows&#x27;, {
    get: function () {
        return _windows.slice();
    }
});

// NOTE: this will in case save-layout not invoke,
//       and it will missing info for current window
EditorWindow.loadLayouts = function () {
    _windowLayouts = {};

    var profile = Editor.loadProfile( &#x27;layout.windows&#x27;, &#x27;local&#x27;, {
        windows: {},
    });

    for ( var name in profile.windows ) {
        var info = profile.windows[name];
        _windowLayouts[name] = info;
    }
};

/**
 * Find window by name or by BrowserWindow instance
 * @method find
 * @static
 * @param {string|BrowserWindow} param
 * @return {Editor.Window}
 */
EditorWindow.find = function ( param ) {
    var i, win;

    if ( typeof param === &quot;string&quot; ) {
        for ( i = 0; i &lt; _windows.length; ++i ) {
            win = _windows[i];
            if ( win.name === param )
                return win;
        }
        return null;
    }

    if ( param instanceof BrowserWindow ) {
        for ( i = 0; i &lt; _windows.length; ++i ) {
            win = _windows[i];
            if ( win.nativeWin === param )
                return win;
        }
        return null;
    }

    return null;
};

/**
 * Add an editor window
 * @method addWindow
 * @static
 * @param {Editor.Window} win
 */
EditorWindow.addWindow = function ( win ) {
    _windows.push(win);
};

/**
 * Remove an editor window
 * @method removeWindow
 * @static
 * @param {Editor.Window} win
 */
EditorWindow.removeWindow = function ( win ) {
    var idx = _windows.indexOf(win);
    if ( idx === -1 ) {
        Editor.warn( &#x27;Can not find window &#x27; + win.name );
        return;
    }
    _windows.splice(idx,1);

    win.dispose();
};

/**
 * Commit all opened window states
 * @method commitWindowStates
 * @static
 */
EditorWindow.commitWindowStates = function () {
    for ( var i = 0; i &lt; _windows.length; ++i ) {
        var editorWin = _windows[i];
        editorWin.commitWindowState();
    }
};

/**
 * Save current windows&#x27; states to profile &#x60;layout.windows.json&#x60; at &#x60;local&#x60;
 * @method saveWindowStates
 * @static
 */
EditorWindow.saveWindowStates = function () {
    // we&#x27;ve quit the app, do not save layout after that.
    if ( !Editor.mainWindow )
        return;

    var profile = Editor.loadProfile( &#x27;layout.windows&#x27;, &#x27;local&#x27; );
    profile.windows = {};
    for ( var i = 0; i &lt; _windows.length; ++i ) {
        var editorWin = _windows[i];
        profile.windows[editorWin.name] = _windowLayouts[editorWin.name];
    }
    profile.save();
};

// ========================================
// Ipc
// ========================================

/**
 * Send ipc messages to page
 * @method sendToPage
 * @param {string} channel
 * @param {...*} [arg] - whatever arguments the request needs
 */
EditorWindow.prototype.sendToPage = function () {
    var webContents = this.nativeWin.webContents;
    if (webContents) {
        webContents.send.apply( webContents, arguments );
        return;
    }

    console.error(&#x27;Failed to send &quot;%s&quot; to %s because web contents not yet loaded&#x27;,
                  arguments[0], this.name);
};

/**
 * Send request to page and wait for the reply
 * [Editor.Window.cancelRequestToPage]
 * @method sendRequestToPage
 * @param {string} request - the request to send
 * @param {...*} [arg] - whatever arguments the request needs
 * @param {function} reply - the callback used to handle replied arguments
 * @return {number} The session id can be used in Editor.Window.cancelRequestToCore
 */
EditorWindow.prototype.sendRequestToPage = function (request) {
    &#x27;use strict&#x27;;
    if (typeof request === &#x27;string&#x27;) {
        var args = [].slice.call(arguments, 1);
        var reply = args[args.length - 1];
        if (typeof reply === &#x27;function&#x27;) {
            args.pop();

            var sessionId = this._nextSessionId++;
            var key = &quot;&quot; + sessionId;
            this._replyCallbacks[key] = reply;

            this.sendToPage(&#x27;editor:sendreq2page&#x27;, request, args, sessionId);
            return sessionId;
        }
        else {
            Editor.error(&#x27;The reply must be of type function&#x27;);
        }
    }
    else {
        Editor.error(&#x27;The request must be of type string&#x27;);
    }
    return -1;
};

/**
 * Cancel request via sessionId
 * @method cancelRequestToPage
 * @param {number} sessionId
 */
EditorWindow.prototype.cancelRequestToPage = function (sessionId) {
    &#x27;use strict&#x27;;
    var key = &quot;&quot; + sessionId;
    var cb = this._replyCallbacks[key];
    if ( cb ) {
        delete this._replyCallbacks[key];
    }
};

EditorWindow.prototype._reply = function (args,sessionId) {
    &#x27;use strict&#x27;;
    var key = &quot;&quot; + sessionId;
    var cb = this._replyCallbacks[key];
    if (cb) {
        cb.apply(null, args);
        delete this._replyCallbacks[key];
    }
};

Ipc.on(&#x27;editor:sendreq2page:reply&#x27;, function replyCallback (event, args, sessionId) {
    var win = BrowserWindow.fromWebContents( event.sender );
    var editorWin = Editor.Window.find(win);
    if ( !editorWin ) {
        Editor.warn(&#x27;editor:sendreq2page:reply failed: Can not find the window.&#x27; );
        return;
    }

    editorWin._reply(args,sessionId);
});

Ipc.on(&#x27;window:open&#x27;, function ( name, url, options ) {
    var editorWin = new Editor.Window(name, options);
    editorWin.nativeWin.setMenuBarVisibility(false);
    editorWin.load(url, options.argv);
    editorWin.show();
});

Ipc.on(&#x27;window:query-layout&#x27;, function ( event, reply ) {
    var win = BrowserWindow.fromWebContents( event.sender );
    var editorWin = Editor.Window.find(win);
    if ( !editorWin ) {
        Editor.warn(&#x27;Failed to query layout, can not find the window.&#x27;);
        reply();
        return;
    }

    var layout = null;
    var needReset = false;

    var winInfo = _windowLayouts[editorWin.name];
    if ( winInfo &amp;&amp; winInfo.layout ) {
        layout = winInfo.layout;
    }

    // if no layout found, and it is main window, reload layout
    if ( editorWin.isMainWindow &amp;&amp; !layout ) {
        if ( Fs.existsSync(Editor._defaultLayout) ) {
            try {
                layout = JSON.parse(Fs.readFileSync(Editor._defaultLayout));
                needReset = true;
            }
            catch (err) {
                Editor.error( &#x27;Failed to load default layout: %s&#x27;, err.message );
                layout = null;
            }
        }
    }

    //
    reply(layout, needReset);
});

Ipc.on(&#x27;window:save-layout&#x27;, function ( event, layoutInfo ) {
    var win = BrowserWindow.fromWebContents( event.sender );
    var editorWin = Editor.Window.find(win);
    if ( !editorWin ) {
        Editor.warn(&#x27;Failed to save layout, can not find the window.&#x27;);
        return;
    }
    editorWin.commitWindowState(layoutInfo);

    // save windows layout
    EditorWindow.saveWindowStates();
});

Ipc.on(&#x27;window:focus&#x27;, function ( event ) {
    var win = BrowserWindow.fromWebContents( event.sender );
    var editorWin = Editor.Window.find(win);
    if ( !editorWin ) {
        Editor.warn(&#x27;Failed to focus, can not find the window.&#x27;);
        return;
    }

    if ( !editorWin.isFocused ) {
        editorWin.focus();
    }
});

Ipc.on(&#x27;window:inspect-at&#x27;, function ( event, x, y ) {
    var nativeWin = BrowserWindow.fromWebContents( event.sender );
    if ( !nativeWin ) {
        Editor.warn(&#x27;Failed to inspect at %d, %d, can not find the window.&#x27;, x, y );
        return;
    }

    nativeWin.inspectElement( x, y );
});

module.exports = EditorWindow;

    </pre>
</div>
</div>
    </div>
  </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/vendor/jquery.min.js"></script>
<script src="../assets/js/jquery-offscreen-trigger.js"></script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/apidocs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
