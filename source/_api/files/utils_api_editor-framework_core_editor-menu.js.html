<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>utils/api/editor-framework/core/editor-menu.js</title>
  <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
  <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
  <link rel="shortcut icon" type="image/ico" href="../assets/favicon.ico">
  <link rel="stylesheet" href="../assets/css/solarized_light.css">
  <script src="../assets/vendor/yui-min.js"></script>
</head>
<body>

<div id="doc">
  <header class="main-header">
    <div class="content">
      <div class="project-title">
        <a href="http://docs.fireball-x.com">
          <img class="logo" src="http://docs.fireball-x.com/images/logo.png" title="fireball">
        </a>
          <h1 class="project-name">fireball</h1>
          <span class="project-version">0.5.0</span>
          <p class="description">Fireball is the Html5 game engine for the future.</p>
        </div>
        <ul class="jump-links">
          <li><a href="#index" class="index-jump-link">index</a></li>
          <li><a href="#top" class="top-jump-link">top</a></li>
        </ul>
    </div>
  </header>
  <div id="bd" class="main-body">
    <div id="docs-sidebar" class="sidebar apidocs"><div id="api-list" style="height:100%">
  <div id="api-tabview" class="tabview" style="height:100%">
    <div id="api-tabview-filter">
      <input type="search" id="api-filter" placeholder="Type to filter APIs">
    </div>
    <div id="api-tabview-panel">
      <ul id="api-items" class="apis items">
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.html">Editor</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
                <h3>properties</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_selfExcluded">
                        selfExcluded
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_requireIpcEvent">
                        requireIpcEvent
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isNode">
                        isNode
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isElectron">
                        isElectron
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isNative">
                        isNative
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isPureWeb">
                        isPureWeb
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isPageLevel">
                        isPageLevel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isCoreLevel">
                        isCoreLevel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isDarwin">
                        isDarwin
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isWin32">
                        isWin32
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_isRetina">
                        isRetina
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_App">
                        App
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_cwd">
                        cwd
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_name">
                        name
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_versions">
                        versions
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_mainEntry">
                        mainEntry
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_frameworkPath">
                        frameworkPath
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#property_appHome">
                        appHome
                      </a>
                    </li>
                </ul>
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_log">
                        log
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_success">
                        success
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_failed">
                        failed
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_info">
                        info
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_warn">
                        warn
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_error">
                        error
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_fatal">
                        fatal
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_connectToConsole">
                        connectToConsole
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_clearLog">
                        clearLog
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_loadProfile">
                        loadProfile
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_quit">
                        quit
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_loadAllPackages">
                        loadAllPackages
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_watchPackages">
                        watchPackages
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_registerProfilePath">
                        registerProfilePath
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_registerPackagePath">
                        registerPackagePath
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_registerDefaultLayout">
                        registerDefaultLayout
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_">
                        
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToWindowsExclude">
                        sendToWindowsExclude
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToWindows">
                        sendToWindows
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToCore">
                        sendToCore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToAll">
                        sendToAll
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToPanel">
                        sendToPanel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToMainWindow">
                        sendToMainWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_url">
                        url
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_require">
                        require
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_registerProtocol">
                        registerProtocol
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_require">
                        require
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_log">
                        log
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToCoreSync">
                        sendToCoreSync
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToCore">
                        sendToCore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToWindows">
                        sendToWindows
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToMainWindow">
                        sendToMainWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToAll">
                        sendToAll
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendToPanel">
                        sendToPanel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_sendRequestToCore">
                        sendRequestToCore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_cancelRequestToCore">
                        cancelRequestToCore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.html#method_KeyCode">
                        KeyCode
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Debugger.html">Editor.Debugger</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Debugger.html#method_toggle">
                        toggle
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Debugger.html#method_open">
                        open
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Debugger.html#method_close">
                        close
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.JS.html">Editor.JS</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_copyprop">
                        copyprop
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_addon">
                        addon
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_extract">
                        extract
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_mixin">
                        mixin
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_extend">
                        extend
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.JS.html#method_clear">
                        clear
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.MainMenu.html">Editor.MainMenu</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_apply">
                        apply
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_reset">
                        reset
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_add">
                        add
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_remove">
                        remove
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.MainMenu.html#method_set">
                        set
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Package.html">Editor.Package</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_load">
                        load
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_unload">
                        unload
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_reload">
                        reload
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_panelInfo">
                        panelInfo
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_widgetInfo">
                        widgetInfo
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_packageInfo">
                        packageInfo
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_packagePath">
                        packagePath
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Package.html#method_build">
                        build
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Panel.html">Editor.Panel</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_open">
                        open
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_close">
                        close
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_findWindow">
                        findWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_findWindows">
                        findWindows
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_findPanels">
                        findPanels
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Panel.html#method_closeAll">
                        closeAll
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Selection.html">Editor.Selection</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_confirm">
                        confirm
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_cancel">
                        cancel
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_select">
                        select
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_unselect">
                        unselect
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_hover">
                        hover
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_setContext">
                        setContext
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_clear">
                        clear
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_hovering">
                        hovering
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_contexts">
                        contexts
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_curActivate">
                        curActivate
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_curSelection">
                        curSelection
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Selection.html#method_filter">
                        filter
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Editor.Utils.html">Editor.Utils</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Editor.Utils.html#method_padLeft">
                        padLeft
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Utils.html#method_formatFrame">
                        formatFrame
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Utils.html#method_smoothScale">
                        smoothScale
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Editor.Utils.html#method_wrapError">
                        wrapError
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
            <a class="module" href="/api/modules/Math.html">Math</a>
            <i class="flag">module</i>
          </div>
          <div class="members-list hidden">
            
            
                <h3>properties</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Math.html#property_TWO_PI">
                        TWO_PI
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#property_HALF_PI">
                        HALF_PI
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#property_D">
                        D
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#property_R">
                        R
                      </a>
                    </li>
                </ul>
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_deg2rad">
                        deg2rad
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_rad2deg">
                        rad2deg
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_rad180">
                        rad180
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_rad360">
                        rad360
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_deg180">
                        deg180
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_deg360">
                        deg360
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_randomRange">
                        randomRange
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_randomRangeInt">
                        randomRangeInt
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_clamp">
                        clamp
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_clamp01">
                        clamp01
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_calculateMaxRect">
                        calculateMaxRect
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/modules/Math.html#method_lerp">
                        lerp
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
              <a class="class"
                href="/api/classes/IpcListener.html"
                title="Editor.IpcListener">Editor.IpcListener</a>
              <i class="flag">class</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/classes/IpcListener.html#method_on">
                        on
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/IpcListener.html#method_once">
                        once
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/IpcListener.html#method_clear">
                        clear
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
              <a class="class"
                href="/api/classes/Menu.html"
                title="Editor.Menu">Editor.Menu</a>
              <i class="flag">class</i>
          </div>
          <div class="members-list hidden">
            
            
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_dispose">
                        dispose
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_reset">
                        reset
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_clear">
                        clear
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_add">
                        add
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_remove">
                        remove
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_set">
                        set
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Menu.html#method_parseTemplate">
                        parseTemplate
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
        <li>
          <div class="api-list-item-clickable wave-btn">
              <a class="class"
                href="/api/classes/Window.html"
                title="Editor.Window">Editor.Window</a>
              <i class="flag">class</i>
          </div>
          <div class="members-list hidden">
            
            
                <h3>properties</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_isMainWindo">
                        isMainWindo
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_isFocuse">
                        isFocuse
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_isMinimize">
                        isMinimize
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_isLoade">
                        isLoade
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#property_window">
                        window
                      </a>
                    </li>
                </ul>
            
            
            
                <h3>methods</h3>
                <ul class="apis members api-members">
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_load">
                        load
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_show">
                        show
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_close">
                        close
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_focus">
                        focus
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_minimize">
                        minimize
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_restore">
                        restore
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_openDevTools">
                        openDevTools
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_adjust">
                        adjust
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_commitWindowState">
                        commitWindowState
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_restorePositionAndSize">
                        restorePositionAndSize
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_find">
                        find
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_addWindow">
                        addWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_removeWindow">
                        removeWindow
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_commitWindowStates">
                        commitWindowStates
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_saveWindowStates">
                        saveWindowStates
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_sendToPage">
                        sendToPage
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_sendRequestToPage">
                        sendRequestToPage
                      </a>
                    </li>
                    <li>
                      <a class="name" href="/api/classes/Window.html#method_cancelRequestToPage">
                        cancelRequestToPage
                      </a>
                    </li>
                </ul>
            
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
</div>
    <div id="docs-main" class="apidocs">
      <div class="content container"><h1 class="file-heading">File: utils/api/editor-framework/core/editor-menu.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var BrowserWindow = require(&#x27;browser-window&#x27;);
var Ipc = require(&#x27;ipc&#x27;);
var Menu = require(&#x27;menu&#x27;);
var MenuItem = require(&#x27;menu-item&#x27;);
var Path = require(&#x27;fire-path&#x27;);

/**
 * @module Editor
 */

function _getMenuItem ( nativeMenu, path, createIfNotExists ) {
    var nextMenu = nativeMenu;
    createIfNotExists = typeof createIfNotExists !== &#x27;undefined&#x27; ? createIfNotExists : false;

    function findMenuItem (menu, name) {
        for (var i = 0; i &lt; menu.items.length; i++) {
            var menuItem = menu.items[i];
            if (menuItem.label === name) {
                return menuItem;
            }
        }
        return null;
    }

    var pathNames = path.split(&#x27;/&#x27;);
    var menuItem = null;
    for (var i = 0; i &lt; pathNames.length; i++) {
        var isLastOne = i === pathNames.length - 1;
        var name = pathNames[i];
        menuItem = findMenuItem(nextMenu, name);
        if (menuItem) {
            if (isLastOne) {
                return menuItem;
            }

            if (!menuItem.submenu || menuItem.type !== &#x27;submenu&#x27;) {
                Editor.error( &#x27;Menu path already occupied: %s&#x27;, path );
                return null;
            }
        }
        else if (createIfNotExists) {
            menuItem = new MenuItem({
                label: name,
                id: name.toLowerCase(),
                submenu: new Menu(),
                type: &#x27;submenu&#x27;,
            });

            // if this is the first one
            if ( i === 0 ) {
                // HACK: we assume last menuItem always be &#x27;Help&#x27;
                var pos = Math.max( nextMenu.items.length-1, 0 );
                nextMenu.insert(pos,menuItem);
            }
            else {
                nextMenu.append(menuItem);
            }

            if (isLastOne) {
                return menuItem;
            }
        }
        else {
            return null;
        }
        nextMenu = menuItem.submenu;
    }
    return menuItem;
}

function _cloneMenuItemLevel1 ( menuItem ) {
    var options = Editor.JS.extract( menuItem, [
        &#x27;click&#x27;,
        &#x27;selector&#x27;,
        &#x27;type&#x27;,
        &#x27;label&#x27;,
        &#x27;sublabel&#x27;,
        &#x27;accelerator&#x27;,
        &#x27;icon&#x27;,
        &#x27;enabled&#x27;,
        &#x27;visible&#x27;,
        &#x27;checked&#x27;,
        // &#x27;submenu&#x27;, // NOTE: never clone submenu, other wise we can&#x27;t change item inside it
        &#x27;id&#x27;,
        &#x27;position&#x27;,
    ]);
    if ( options.type === &#x27;submenu&#x27; ) {
        options.submenu = new Menu();
    }
    return new MenuItem(options);
}

function _cloneMenuExcept ( newMenu, nativeMenu, exceptPath, curPath ) {
    var result = false;

    for ( var i = 0; i &lt; nativeMenu.items.length; ++i ) {
        var menuItem = nativeMenu.items[i];
        var path = Path.posix.join( curPath, menuItem.label );

        if ( Path.contains( path, exceptPath ) ) {
            if ( path === exceptPath ) {
                result = true;
                continue;
            }

            var newMenuItem = _cloneMenuItemLevel1(menuItem);
            if ( newMenuItem.type === &#x27;submenu&#x27; ) {
                var removed = _cloneMenuExcept( newMenuItem.submenu,
                                                menuItem.submenu,
                                                exceptPath,
                                                path );
                if ( removed ) result = removed;

                if ( newMenuItem.submenu.items.length &gt; 0 ) {
                    newMenu.append(newMenuItem);
                }
            }
            else {
                newMenu.append(newMenuItem);
            }
        }
        else {
            newMenu.append(menuItem);
        }
    }

    return result;
}

/**
 * @class Menu
 * @constructor
 * @param {object[]|object} template - Menu template for initialize. The template take the options of
 * Electron&#x27;s [Menu Item](https://github.com/atom/electron/blob/master/docs/api/menu-item.md)
 * plus the following properties.
 * @param {string} template.message - Ipc message name.
 * @param {string} template.command - A global function in core level (e.g. Editor.foo.bar ).
 * @param {array} template.params - The parameters passed through ipc.
 * @param {string} template.panel - The panelID, if specified, the message will send to panel.
 * @param {object} [webContents] - A [WebContents](https://github.com/atom/electron/blob/master/docs/api/browser-window.md#class-webcontents) object.
 */
function EditorMenu ( template, webContents ) {
    if ( template ) {
        EditorMenu.parseTemplate(template, webContents);
        this.nativeMenu = Menu.buildFromTemplate(template);
    }
    else {
        this.nativeMenu = new Menu();
    }
}

/**
 * De-reference the native menu.
 * @method dispose
 */
EditorMenu.prototype.dispose = function () {
    this.nativeMenu = null;
};

/**
 * Reset the menu from the template.
 * @method reset
 * @param {object[]|object} template
 */
EditorMenu.prototype.reset = function (template) {
    this.nativeMenu = Menu.buildFromTemplate(template);
};


/**
 * Clear all menu item in it.
 * @method clear
 */
EditorMenu.prototype.clear = function () {
    this.nativeMenu = new Menu();
};

/**
 * Build a template into menu item and add it to path
 * @method add
 * @param {string} path - A menu path
 * @param {object[]|object} template
 * @example
 * &#x60;&#x60;&#x60;js
 * var editorMenu = new Editor.Menu();
 * editorMenu.add( &#x27;foo/bar&#x27;, {
 *     label: foobar,
 *     message: &#x27;foobar:say&#x27;,
 *     params: [&#x27;foobar: hello!&#x27;]
 * });
 * &#x60;&#x60;&#x60;
 */
EditorMenu.prototype.add = function ( path, template ) {
    EditorMenu.parseTemplate(template);

    if ( !Array.isArray(template) )
        template = [template];

    var menuItem = _getMenuItem( this.nativeMenu, path, true );

    if ( !menuItem ) {
        Editor.error(&#x27;Failed to find menu in path: %s&#x27;, path );
        return false;
    }

    if ( menuItem.type !== &#x27;submenu&#x27; ) {
        Editor.error(&#x27;Menu item %s should be submenu&#x27;, path );
        return false;
    }

    if ( !menuItem.submenu ) {
        Editor.error(&#x27;Invalid menu item %s, submenu not found&#x27;, path );
        return false;
    }

    function checkMenuItemLabel ( label ) {
        return function ( item ) {
            return item.label === label;
        };
    }

    var newSubMenu = Menu.buildFromTemplate(template);
    var i, newSubMenuItem;
    for ( i = 0; i &lt; newSubMenu.items.length; ++i ) {
        newSubMenuItem = newSubMenu.items[i];

        if ( menuItem.submenu.items.some( checkMenuItemLabel(newSubMenuItem.label) ) ) {
            Editor.error(&#x27;Failed to add menu to %s, A menu item %s you try to add already exists.&#x27;,
                         path,
                         Path.posix.join( path, newSubMenuItem.label ) );
            return false;
        }
    }

    for ( i = 0; i &lt; newSubMenu.items.length; ++i ) {
        newSubMenuItem = newSubMenu.items[i];
        menuItem.submenu.append(newSubMenuItem);
    }

    return true;
};

/**
 * Remove menu item at path.
 * @method remove
 * @param {string} path - A menu path
 */
// base on electron#527 said, there is no simple way to remove menu item
// https://github.com/atom/electron/issues/527
EditorMenu.prototype.remove = function ( path ) {
    var newMenu = new Menu();
    var removed = _cloneMenuExcept( newMenu, this.nativeMenu, path, &#x27;&#x27; );

    if ( !removed ) {
        Editor.error(&#x27;Failed to remove menu in path: %s, can not find it&#x27;, path );
        return false;
    }

    this.nativeMenu = newMenu;
    return true;
};

/**
 * Set menu options at path.
 * @method set
 * @param {string} path - A menu path
 * @param {object} [options]
 * @param {NativeImage} [options.icon] - A [NativeImage](https://github.com/atom/electron/blob/master/docs/api/native-image.md)
 * @param {Boolean} [options.enabled]
 * @param {Boolean} [options.visible]
 * @param {Boolean} [options.checked] - NOTE: You must set your menu-item type to &#x27;checkbox&#x27; to make it work
 */
EditorMenu.prototype.set = function ( path, options ) {
    var menuItem = _getMenuItem( this.nativeMenu, path, false );

    if ( !menuItem ) {
        Editor.error(&#x27;Failed to find menu in path: %s&#x27;, path );
        return false;
    }

    if ( menuItem.type === &#x27;separator&#x27; ) {
        Editor.error(&#x27;Menu item %s is a separator&#x27;, path );
        return false;
    }

    if ( options.icon !== undefined )
        menuItem.icon = options.icon;

    if ( options.enabled !== undefined )
        menuItem.enabled = options.enabled;

    if ( options.visible !== undefined )
        menuItem.visible = options.visible;

    if ( options.checked !== undefined )
        menuItem.checked = options.checked;

    return true;
};

/**
 * Parse the menu template to process additional keyword we added for Electron.
 * If webContents provided, the &#x60;template.message&#x60; will send to the target webContents.
 * @method parseTemplate
 * @param {object[]|object} template
 * @param {object} [webContents] - A [WebContents](https://github.com/atom/electron/blob/master/docs/api/browser-window.md#class-webcontents) object.
 */
EditorMenu.parseTemplate = function ( template, webContents ) {
    if ( Array.isArray(template) ) {
        for ( var i = 0; i &lt; template.length; ++i ) {
            EditorMenu.parseTemplate(template[i], webContents);
        }
        return;
    }

    var args;

    if ( template.message ) {
        if ( template.click ) {
            Editor.error(&#x27;Not support to use click and message at the same time: &#x27; + template.label);
            return;
        }

        args = [template.message];
        if (template.params) {
            if ( !Array.isArray(template.params) ) {
                Editor.error(&#x27;message parameters must be an array&#x27;);
                return;
            }
            args = args.concat(template.params);
            delete template.params;
        }
        if ( template.panel ) {
            args.unshift(template.panel);
        }

        template.click = (function (args) {
            if ( template.panel ) {
                return function () {
                    setImmediate(function () {
                        Editor.sendToPanel.apply(Editor, args);
                    });
                };
            }
            else if ( webContents ) {
                return function () {
                    setImmediate(function () {
                        webContents.send.apply(webContents,args);
                    });
                };
            }
            else {
                return function () {
                    // response in next tick to prevent ipc blocking issue caused by atom-shell&#x27;s menu.
                    setImmediate(function () {
                        Editor.sendToCore.apply(Editor, args);
                    });
                };
            }
        })(args);
        delete template.message;
    }
    else if ( template.command ) {
        var paths = template.command.split(&#x27;.&#x27;);
        var idx = 0;
        var tmp = global[paths[idx]];
        ++idx;
        while ( tmp &amp;&amp; idx &lt; paths.length ) {
            tmp = tmp[paths[idx]];
            ++idx;
        }
        if ( tmp &amp;&amp; typeof tmp === &#x27;function&#x27; ) {
            args = [];
            if (template.params) {
                if ( !Array.isArray(template.params) ) {
                    Editor.error(&#x27;message parameters must be an array&#x27;);
                    return;
                }
                args = args.concat(template.params);
                delete template.params;
            }
            template.click = (function (args) {
                return function () {
                    tmp.apply(Editor, args);
                };
            })(args);
        }
        delete template.command;
    }
    else if ( template.submenu ) {
        EditorMenu.parseTemplate(template.submenu, webContents);
    }
};

// ========================================
// Ipc
// ========================================

Ipc.on(&#x27;menu:popup&#x27;, function ( event, x, y, template ) {
    var editorMenu = new Editor.Menu(template,event.sender);
    if ( x ) x = Math.floor(x);
    if ( y ) y = Math.floor(y);
    editorMenu.nativeMenu.popup(BrowserWindow.fromWebContents(event.sender), x, y);
    editorMenu.dispose();
});

module.exports = EditorMenu;

    </pre>
</div>
</div>
    </div>
  </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/vendor/jquery.min.js"></script>
<script src="../assets/js/jquery-offscreen-trigger.js"></script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/apidocs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
